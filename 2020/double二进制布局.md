---
title: double二进制布局
date: 2020-08-26 14:20
author: mq
---

# double二进制布局

## IEEE754

```
+-+-----------+----------------------------------------------------+
|s| exp(11bit)|                     mantissa(52bit)                |
+-+-----------+----------------------------------------------------+
```

* exp存的移码（真实值+1023) (非规格化数指数位为0，真实指数为-1023)
* mantissa二进制小数去掉最高位的非零：1.xxxxxxxx(2) 只保留 x 的部分
* s是符号位

* 真实值 = ${s} \cdot 1 . {mantissa} \cdot 2 ^ { exp - 1023 }$

### e.g. 1.5

```
+-+-----------+----------------------------------------------------+
|0|01111111111|1000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+|   1023    |                  二进制的0.5 (省略首位1)           |
+-+-----------+----------------------------------------------------+
```

### e.g. 最大奇数 (加减乘除不丢精度最大整数范围)
```
+-+-----------+----------------------------------------------------+
|0|10000110011|1111111111111111111111111111111111111111111111111111|
+-+-----------+----------------------------------------------------+
|+| 真实值52  |                 52个1                              |
+-+-----------+----------------------------------------------------+
```
这个数就是 (0b1.<52个1>) * 2^52 = 0b<53个1>

### e.g. 最大值
```
+-+-----------+----------------------------------------------------+
|0|01111111111|1111111111111111111111111111111111111111111111111111|
+-+-----------+----------------------------------------------------+
|+| 真实值1023|                 52个1                              |
+-+-----------+----------------------------------------------------+
```
这个数就是 (0b1.<52个1>) * 2^1023

### e.g. INF
```
+-+-----------+----------------------------------------------------+
|0|11111111111|0000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+| 全1       |                 全0                                |
+-+-----------+----------------------------------------------------+
```

### e.g. NAN
```
+-+-----------+----------------------------------------------------+
|0|11111111111|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|
+-+-----------+----------------------------------------------------+
|+| 全1       |                 非0                                |
+-+-----------+----------------------------------------------------+
```
因此非零的部分可以用来存数据，取值区间是1 ~ 2^52-1

### e.g. 最小规格化正数
```
+-+-----------+----------------------------------------------------+
|0|00000000001|0000000000000000000000000000000000000000000000000000|
+-+-----------+----------------------------------------------------+
|+| 表示-1022 |                 全0                                |
+-+-----------+----------------------------------------------------+
```
表示 1 * 2^-1022

### e.g. 非规格化
```
+-+-----------+----------------------------------------------------+
|0|00000000000|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|
+-+-----------+----------------------------------------------------+
|+| 全0       |                 非0                                |
+-+-----------+----------------------------------------------------+
```
指数位全0，真实指数为-1023

表示值为 (0b1.XXXXXXX...) * 2^-1023

非规格化数小于任何规格化数(正的，负的相反)
